<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
	http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd">

 <aop:aspectj-autoproxy/> 
    
 <bean id="buffer" class="it.fabioformosa.lab.prodcons.entities.impl.SimpleBufferImpl">
     <constructor-arg name="size" value="3"/>
 </bean>
 
 <bean id="workerFactory" class="it.fabioformosa.lab.prodcons.workers.WorkerFactory">
 	<property name="buffer" ref="buffer"/>    
 </bean>
 
 <bean id="manager" class="it.fabioformosa.lab.prodcons.manager.DefaultManagerImpl">
     <property name="workerFactory" ref="workerFactory" />
     <property name="producerNum" value="4" />
     <property name="consumerNum" value="2" />
 </bean>
 
 <bean id="consumer" scope="prototype" class="it.fabioformosa.lab.prodcons.simple.SimpleConsumer"
     factory-bean="workerFactory"
     factory-method="getConsumerInstance">
 </bean>

 <bean id="producer" scope="prototype" class="it.fabioformosa.lab.prodcons.simple.SimpleProducer"
     factory-bean="workerFactory"
     factory-method="getProducerInstance">
 </bean>
 
 <bean id="logAspect" class="it.fabioformosa.lab.prodcons.aspects.BufferLogAspect" />
    
</beans>
